<html>
<head>
</head>
<link rel="stylesheet" href="css/student.css">
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script>


function get_completed() {
 // alert("ss")
  $.ajax({
            url: 'http://127.0.0.1:5000/api/v1/get/assignment/completed/'+sessionStorage.getItem("username"),
            type: 'GET',
            success: function(data) {
              console.log(data.Completed)
             var i;
             var comp=document.getElementById("completed")
             comp.innerHTML=""
             for(i=0;i<data.Completed.length;i++)
             {
               var l=document.createElement("li")
               l.innerHTML="<a>"+data.Completed[i]+"</a"
                l.setAttribute("onClick","downloadAssignment(\""+data.Completed[i]+"\")")
               
                
               comp.appendChild(l)
             }
            },
            error: function(data) {
            //  document.getElementById("error-login").innerHTML=data.responseText;
            //  document.getElementById("error-login").style.color="red";
            }
        });

        $.ajax({
            url: 'http://127.0.0.1:5000/api/v1/get/assignment/pending/'+sessionStorage.getItem("username"),
            type: 'GET',
            success: function(data) {
              console.log(data.Pending)
             var i;
             var comp=document.getElementById("pending")
             comp.innerHTML=""
             for(i=0;i<data.Pending.length;i++)
             {
               var l=document.createElement("li")
               l.innerHTML="<a>"+data.Pending[i]+"</a"
               l.setAttribute("onClick","uploadAssignment(\""+data.Pending[i]+"\")")
               comp.appendChild(l)
             }
            },
            error: function(data) {
            //  document.getElementById("error-login").innerHTML=data.responseText;
            //  document.getElementById("error-login").style.color="red";
            }
        });
        setTimeout(get_completed,2000)
}

function uploadAssignment(s)
{
  sessionStorage.setItem("assignment",s);
                window.location.href="drag.html"
//alert(s)
}

function downloadAssignment(s)
{
  sessionStorage.setItem("assignment",s);
                window.location.href="file.html"
//alert(s)
}
$(document).ready(function(){
  $("#accordian h3").click(function(){
    //slide up all the link lists
    $("#accordian ul ul").slideUp();
    //slide down the link list below the h3 clicked - only if its closed
    if(!$(this).next().is(":visible"))
    {
      $(this).next().slideDown();
    }
  })
})
</script>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<body onload="get_completed()">

  <div id="name"></div>
<div id="accordian" onload="get_completed()">
  <ul>
    <li>
      <h3><span class="icon-dashboard"></span>Dashboard</h3>
      <ul>
        <li><a href="#">Reports</a></li>
        <li><a href="#">Search</a></li>
        <li><a href="#">Graphs</a></li>
        <li><a href="#">Settings</a></li>
      </ul>
    </li>
    <!-- we will keep this LI open by default -->
    <li  onload="get_completed()" class="active">
      <h3><span class="icon-tasks"></span>Pending Tasks</h3>
      <ul id="pending">
        
      </ul>
    </li>
    <li onload="get_completed()" class="active">
      <h3><span class="icon-tasks"></span>Completed Tasks</h3>
      <ul id="completed">
        
      </ul>
    </li>
  </ul>
</div>

<script>
var d=document.getElementById("name")
d.innerHTML="Hello  " + sessionStorage.getItem("name")</script>
</body>
</html>